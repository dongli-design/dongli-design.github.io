<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dong Li · Graphic Design Portfolio</title>
  <meta name="description" content="Graphic design portfolio of Dong Li – branding, print, and layout projects." />

  <style>
    :root{
      --bg:#ffffff;
      --text:#111;
      --muted:#666;
      --line:#eaeaea;
      --card:#f6f6f6;
      --max:1120px;
      --r:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.5;
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:var(--max); margin:0 auto; padding:0 20px}

    /* Top bar */
    .topbar{
      position:sticky; top:0; z-index:10;
      background:rgba(255,255,255,.9);
      backdrop-filter:saturate(180%) blur(10px);
      border-bottom:1px solid var(--line);
    }
    .topbar .inner{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 0;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:700;
      letter-spacing:.2px;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background:#2f7d4d;
    }
    nav{display:flex; gap:18px; color:var(--muted); font-weight:600; font-size:14px}
    nav a:hover{color:var(--text)}

    /* ===== HERO (Green cover style) ===== */
    .hero{
      position:relative;
      margin-top:18px;
      border-radius:28px;
      overflow:hidden;
      background:#1f9d62;
      color: #fff;
    }
    .heroInner{
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap:32px;
      padding:80px 64px 64px;
      position:relative;
    }
    .hero .kicker{
      color:rgba(255,255,255,.85);
      font-weight:700;
      font-size:14px;
      margin:0 0 14px;
    }
    .hero h1{
      margin:0 0 16px;
      font-size:52px;
      line-height:1.05;
      letter-spacing:-0.6px;
      max-width:22ch;
    }
    .hero .sub{
      margin:0 0 28px;
      font-size:16px;
      color:rgba(255,255,255,.92);
      max-width:60ch;
    }
    .hero .cta{
      display:flex;
      gap:14px;
      flex-wrap:wrap;
    }
    .hero .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:12px 20px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.6);
      background:transparent;
      color:#fff;
      font-weight:800;
      font-size:14px;
    }
    .hero .btn.primary{
      background:#fff;
      color:#1f9d62;
      border-color:#fff;
    }
    .hero .btn:hover{transform:translateY(-1px);}
    .hero .divider{
      border-top:1px solid rgba(255,255,255,.35);
      margin:0;
    }
    @media (max-width: 980px){
      .heroInner{
        grid-template-columns:1fr;
        padding:64px 36px 48px;
      }
      .hero h1{font-size:40px}
    }

    /* Section headings */
    .sectionTitle{
      display:flex; align-items:baseline; justify-content:space-between;
      gap:16px; margin:14px 0 14px;
    }
    .sectionTitle h2{margin:0; font-size:18px; letter-spacing:.2px}
    .sectionTitle p{margin:0; color:var(--muted); font-size:14px}

    /* Grid cards */
    .grid{
      display:grid;
      grid-template-columns:repeat(12,1fr);
      gap:16px;
      padding-bottom:18px;
    }
    .card{
      grid-column:span 4;
      border:1px solid var(--line);
      border-radius:var(--r);
      overflow:hidden;
      background:#fff;
      transition:transform .15s ease, box-shadow .15s ease;
      cursor:pointer;
    }
    .card:hover{
      transform:translateY(-2px);
      box-shadow:0 10px 30px rgba(0,0,0,.06);
    }
    .thumb{
      background:var(--card);
      aspect-ratio: 5 / 2;
      overflow:hidden;
    }
    .thumb img{
      width:100%; height:100%;
      object-fit:cover;
      display:block;
    }
    .meta{padding:12px 12px 14px}
    .meta .tag{color:var(--muted); font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:.6px}
    .meta .title{margin:6px 0 0; font-size:14px; font-weight:800}
    .meta .desc{margin:6px 0 0; color:var(--muted); font-size:13px}

    /* Two-column blocks */
    .twoCol{
      display:grid;
      grid-template-columns:1.2fr .8fr;
      gap:18px;
      padding:18px 0 10px;
    }
    .box{
      border:1px solid var(--line);
      border-radius:var(--r);
      padding:16px;
      background:#fff;
    }
    .box h3{margin:0 0 10px; font-size:16px}
    .box p{margin:0 0 10px; color:var(--muted)}
    .list{margin:0; padding-left:18px; color:var(--muted)}
    .list li{margin:6px 0}

    footer{
      border-top:1px solid var(--line);
      padding:24px 0;
      color:var(--muted);
      font-size:13px;
    }

    /* Responsive */
    @media (max-width: 980px){
      .card{grid-column:span 6}
      .twoCol{grid-template-columns:1fr}
      h1{font-size:34px}
    }
    @media (max-width: 560px){
      .card{grid-column:span 12}
      nav{gap:12px}
    }

    /* ===== Lightbox (one-file next/prev + pinch + pan) ===== */
    .lightbox{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.0);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:999;
      padding:18px;

      opacity:0;
      transition:opacity .22s ease, background .22s ease;

      /* 接管手势 */
      touch-action:none;
    }
    .lightbox.active{
      display:flex;
      opacity:1;
      background:rgba(0,0,0,.88);
    }

    .lb-ui{
      position:absolute;
      top:14px;
      left:14px;
      right:14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      color:#fff;
      font-weight:700;
      gap:10px;
      z-index:2;
    }
    .lb-left, .lb-right{display:flex; gap:10px; align-items:center;}
    .lb-count{color:rgba(255,255,255,.8); font-weight:600; font-size:13px;}
    .lb-btn{
      border:1px solid rgba(255,255,255,.25);
      background:rgba(255,255,255,.10);
      color:#fff;
      padding:8px 14px;
      border-radius:999px;
      cursor:pointer;
      font-size:14px;
      font-weight:700;
    }
    .lb-btn:hover{ background:rgba(255,255,255,.18); }
    .lb-btn:disabled{ opacity:.45; cursor:not-allowed; }

    .lb-nav{
      position:absolute;
      bottom:18px;
      display:flex;
      gap:12px;
      z-index:2;
    }

    /* ✅ stage：负责适配屏幕/承接手势 */
    .lb-stage{
      width:92vw;
      height:88vh;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      border-radius:14px;
      touch-action:none;
      z-index:1;
    }

    .lightbox img{
      max-width:100%;
      max-height:100%;
      width:auto;
      height:auto;
      border-radius:14px;
      background:#111;
      display:block;

      /* 变换：translate + scale */
      transform:translate3d(0,0,0) scale(1);
      transform-origin:center center;

      opacity:0;
      transition:opacity .22s ease, transform .22s ease;
      user-select:none;
      -webkit-user-drag:none;
    }
    .lightbox.active img{
      opacity:1;
    }
    .lightbox img.is-fading{
      opacity:0;
    }

    /* 横屏更贴合 */
    @media (orientation: landscape){
      .lb-stage{
        width:94vw;
        height:84vh;
      }
      .lb-nav{ bottom:12px; }
      .lb-ui{ top:10px; }
    }
  </style>
</head>

<body>
  <!-- Top bar -->
  <div class="topbar">
    <div class="wrap">
      <div class="inner">
        <div class="brand">
          <span class="dot"></span>
          <span>Dong Li</span>
        </div>
        <nav>
          <a href="#work">Work</a>
          <a href="#about">About</a>
          <a href="#contact">Contact</a>
        </nav>
      </div>
    </div>
  </div>

  <main class="wrap">
    <!-- Hero -->
    <section class="hero">
      <div class="heroInner">
        <div class="heroCopy">
          <p class="kicker">Graphic Design Portfolio</p>
          <h1>Branding, print, and layout projects.</h1>
          <p class="sub">
            I build clean visual systems and production-ready designs across brand identity,
            editorial layout, and marketing materials.
          </p>
          <div class="cta">
            <a class="btn primary" href="#work">View selected work</a>
            <a class="btn" href="#contact">Get in touch</a>
          </div>
        </div>
      </div>
      <div class="divider"></div>
    </section>

    <!-- Work -->
    <section id="work">
      <div class="sectionTitle">
        <h2>Selected Work</h2>
        <p>Click a project to view the full image.</p>
      </div>

      <div class="grid">
        <div class="card" data-index="0">
          <div class="thumb"><img src="portfolio.jpg" alt="Project 1"></div>
          <div class="meta">
            <div class="tag">Portfolio</div>
            <div class="title">Graphic Design Portfolio</div>
            <div class="desc">Portfolio cover and title page.</div>
          </div>
        </div>

        <div class="card" data-index="1">
          <div class="thumb"><img src="portfolio2.jpg" alt="Project 2"></div>
          <div class="meta">
            <div class="tag">Introduction</div>
            <div class="title">About the Designer</div>
            <div class="desc">Personal introduction and profile photo.</div>
          </div>
        </div>

        <div class="card" data-index="2">
          <div class="thumb"><img src="portfolio3.jpg" alt="Project 3"></div>
          <div class="meta">
            <div class="tag">Brand Identity</div>
            <div class="title">Creative Studio Identity</div>
            <div class="desc">Logo, letterhead, envelope, and business card.</div>
          </div>
        </div>

        <div class="card" data-index="3">
          <div class="thumb"><img src="portfolio4.jpg" alt="Project 4"></div>
          <div class="meta">
            <div class="tag">Brand Identity</div>
            <div class="title">Ventuno Coffee / Dessert Brand</div>
            <div class="desc">Logo, cup, carrier and box.</div>
          </div>
        </div>

        <div class="card" data-index="4">
          <div class="thumb"><img src="portfolio5.jpg" alt="Project 5"></div>
          <div class="meta">
            <div class="tag">Brand Identity</div>
            <div class="title">Ventuno Coffee / Dessert Brand</div>
            <div class="desc">Visual system for coffee / dessert brand.</div>
          </div>
        </div>

        <div class="card" data-index="5">
          <div class="thumb"><img src="portfolio6.jpg" alt="Project 6"></div>
          <div class="meta">
            <div class="tag">Brand Identity</div>
            <div class="title">La Pasteria Restaurant Brand</div>
            <div class="desc">Logo, menu, print, and storefront design.</div>
          </div>
        </div>

        <div class="card" data-index="6">
          <div class="thumb"><img src="portfolio7.jpg" alt="Project 7"></div>
          <div class="meta">
            <div class="tag">Poster</div>
            <div class="title">Salon Moto Montréal</div>
            <div class="desc">Event poster and billboard design.</div>
          </div>
        </div>

        <div class="card" data-index="7">
          <div class="thumb"><img src="portfolio8.jpg" alt="Project 8"></div>
          <div class="meta">
            <div class="tag">Print</div>
            <div class="title">Salon Moto Montréal Tickets / Brochure</div>
            <div class="desc">Ticket layout with pricing and barcode. / Trifold brochure with schedule and exhibitors.</div>
          </div>
        </div>

        <div class="card" data-index="8">
          <div class="thumb"><img src="portfolio9.jpg" alt="Project 9"></div>
          <div class="meta">
            <div class="tag">Stationery</div>
            <div class="title">Wedding Invitation Suite</div>
            <div class="desc">Invitations, menu, seating chart, and cards.</div>
          </div>
        </div>

        <div class="card" data-index="9">
          <div class="thumb"><img src="portfolio10.jpg" alt="Project 10"></div>
          <div class="meta">
            <div class="tag">Print</div>
            <div class="title">Calendar</div>
            <div class="desc">Monthly calendar layout and print design.</div>
          </div>
        </div>

        <div class="card" data-index="10">
          <div class="thumb"><img src="portfolio11.jpg" alt="Project 11"></div>
          <div class="meta">
            <div class="tag">Web</div>
            <div class="title">Website Design</div>
            <div class="desc">Desktop and mobile website layouts.</div>
          </div>
        </div>

        <div class="card" data-index="11">
          <div class="thumb"><img src="portfolio12.jpg" alt="Project 12"></div>
          <div class="meta">
            <div class="tag">Social Media</div>
            <div class="title">Jeep Campaign</div>
            <div class="desc">Instagram carousel and post designs.</div>
          </div>
        </div>

        <div class="card" data-index="12">
          <div class="thumb"><img src="portfolio13.jpg" alt="Project 13"></div>
          <div class="meta">
            <div class="tag">End</div>
            <div class="title">Thank You</div>
            <div class="desc">Portfolio closing page.</div>
          </div>
        </div>

        <div class="card" data-index="13">
          <div class="thumb"><img src="portfolio14.jpg" alt="Project 14"></div>
          <div class="meta">
            <div class="tag">Cover</div>
            <div class="title">Portfolio Back Cover</div>
            <div class="desc">Contact information and branding.</div>
          </div>
        </div>
      </div>
    </section>

    <div class="divider"></div>

    <!-- About + Contact -->
    <section class="twoCol">
      <div class="box" id="about">
        <h3>About</h3>
        <p>
          I’m Dong Li, a graphic designer graduated from Rosemount Technology Centre in Montréal. I focus on brand identity, layout, and print-ready production.
          I enjoy building clean systems that stay consistent across touchpoints.
        </p>
        <ul class="list">
          <li>Tools: Illustrator, InDesign, Photoshop</li>
          <li>Availability: Open to full-time graphic designer or junior designer positions.</li>
        </ul>
      </div>

      <div class="box" id="contact">
        <h3>Contact</h3>
        <p>Email is the best way to reach me.</p>
        <ul class="list">
          <li>Email: <a href="mailto:dli665511@gmail.com">dli665511@gmail.com</a></li>
          <li>LinkedIn: <a href="https://www.linkedin.com/" target="_blank" rel="noopener">linkedin.com/in/your-link</a></li>
          <li>Location: Candiac, QC</li>
        </ul>
      </div>
    </section>

    <footer>
      © <span id="y"></span> Dong Li · Portfolio
    </footer>
  </main>

  <!-- ✅ Lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lb-ui">
      <div class="lb-left">
        <button class="lb-btn" id="lb-close" type="button">✕ Close</button>
        <span class="lb-count" id="lb-count"></span>
      </div>
      <div class="lb-right"></div>
    </div>

    <div class="lb-stage" id="lb-stage" aria-label="Image viewer">
      <img id="lb-img" src="" alt="Large view" draggable="false" />
    </div>

    <div class="lb-nav">
      <button class="lb-btn" id="lb-prev" type="button">← Prev</button>
      <button class="lb-btn" id="lb-next" type="button">Next →</button>
    </div>
  </div>

  <script>
    // 年份
    document.getElementById('y').textContent = new Date().getFullYear();

    // ✅ 大图顺序
    const images = [
      "portfolio.jpg",
      "portfolio2.jpg",
      "portfolio3.jpg",
      "portfolio4.jpg",
      "portfolio5.jpg",
      "portfolio6.jpg",
      "portfolio7.jpg",
      "portfolio8.jpg",
      "portfolio9.jpg",
      "portfolio10.jpg",
      "portfolio11.jpg",
      "portfolio12.jpg",
      "portfolio13.jpg",
      "portfolio14.jpg"
    ];

    const lightbox = document.getElementById("lightbox");
    const lbImg = document.getElementById("lb-img");
    const lbStage = document.getElementById("lb-stage");
    const lbCount = document.getElementById("lb-count");
    const prevBtn = document.getElementById("lb-prev");
    const nextBtn = document.getElementById("lb-next");
    const closeBtn = document.getElementById("lb-close");

    let current = 0;

    // ✅ Zoom + Pan state
    let scale = 1;
    const MIN_SCALE = 1;
    const MAX_SCALE = 3;

    let tx = 0, ty = 0;        // 平移
    let baseW = 0, baseH = 0;  // contain 适配后的基础显示尺寸

    function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }

    function applyTransform(){
      lbImg.style.transform = `translate3d(${tx}px, ${ty}px, 0) scale(${scale})`;
    }

    function computeBaseSize(){
      const stageW = lbStage.clientWidth;
      const stageH = lbStage.clientHeight;
      const imgW = lbImg.naturalWidth || 1;
      const imgH = lbImg.naturalHeight || 1;
      const ar = imgW / imgH;

      let w = stageW;
      let h = w / ar;
      if(h > stageH){
        h = stageH;
        w = h * ar;
      }
      baseW = w;
      baseH = h;
    }

   function clampPan(){
  const stageW = lbStage.clientWidth;
  const stageH = lbStage.clientHeight;

  const scaledW = baseW * scale;
  const scaledH = baseH * scale;

  const maxX = Math.max(0, (scaledW - stageW) / 2);
  const maxY = Math.max(0, (scaledH - stageH) / 2);

  tx = clamp(tx, -maxX, maxX);
  ty = clamp(ty, -maxY, maxY);

  return { maxX, maxY };
}

    function setScale(next){
      scale = clamp(next, MIN_SCALE, MAX_SCALE);
      clampPan();
      applyTransform();
    }

    function resetView(){
      scale = 1;
      tx = 0;
      ty = 0;
      clampPan();
      applyTransform();
    }

    function render(){
      // 换图先复位（等图片 load 后再算 base size）
      resetView();

      lbImg.classList.add("is-fading");
      lbImg.src = images[current];
      lbCount.textContent = `${current + 1} / ${images.length}`;
      prevBtn.disabled = (current === 0);
      nextBtn.disabled = (current === images.length - 1);

      lbImg.onload = () => {
        computeBaseSize();
        clampPan();
        applyTransform();

        requestAnimationFrame(() => {
          lbImg.classList.remove("is-fading");
        });
      };
    }

    function openLB(i){
      current = Math.max(0, Math.min(images.length - 1, i));
      lightbox.classList.add("active");
      lightbox.setAttribute("aria-hidden", "false");
      render();
    }

    function closeLB(){
      lightbox.classList.remove("active");
      lightbox.setAttribute("aria-hidden", "true");
      lbImg.src = "";
      resetView();
    }

    // 打开
    document.querySelectorAll(".card[data-index]").forEach(card=>{
      card.addEventListener("click", (e)=>{
        e.preventDefault();
        openLB(parseInt(card.dataset.index, 10));
      });
    });

    // 下一项 / 上一项
    nextBtn.addEventListener("click", ()=>{ if(current < images.length - 1){ current++; render(); }});
    prevBtn.addEventListener("click", ()=>{ if(current > 0){ current--; render(); }});

    // 关闭
    closeBtn.addEventListener("click", closeLB);

    // 点黑色背景关闭
    lightbox.addEventListener("click", (e)=>{
      if(e.target === lightbox) closeLB();
    });

    // 键盘
    window.addEventListener("keydown", (e)=>{
      if(!lightbox.classList.contains("active")) return;
      if(e.key === "ArrowRight") nextBtn.click();
      if(e.key === "ArrowLeft") prevBtn.click();
      if(e.key === "Escape") closeLB();
    });

    /* =========================
       ✅ Touch Gestures (Mobile)
       - scale == 1: swipe left/right = prev/next, swipe down = close
       - scale > 1: one finger drag = PAN
       - 2 fingers: pinch to zoom
       - double tap: zoom toggle
    ========================== */

    let tracking = false;
    let startX = 0, startY = 0;
    let dx = 0, dy = 0;

    let isPinching = false;
    let startDist = 0;
    let startScale = 1;

    let isPanning = false;
    let panStartX = 0, panStartY = 0;
    let panStartTx = 0, panStartTy = 0;

    const SWIPE_X = 45;
    const SWIPE_Y = 70;

    function getTouchDist(t1, t2){
      const x = t2.clientX - t1.clientX;
      const y = t2.clientY - t1.clientY;
      return Math.hypot(x, y);
    }

    // 双击放大/还原
    let lastTap = 0;
    function onTap(){
      if(!lightbox.classList.contains("active")) return;
      const now = Date.now();
      if(now - lastTap < 280){
        if(scale === 1){
          scale = 2;
          tx = 0; ty = 0;
          clampPan();
          applyTransform();
        }else{
          resetView();
        }
      }
      lastTap = now;
    }

    function onTouchStart(e){
      if(!lightbox.classList.contains("active")) return;

      if(e.touches.length === 2){
        isPinching = true;
        tracking = false;
        isPanning = false;
        startDist = getTouchDist(e.touches[0], e.touches[1]);
        startScale = scale;
        return;
      }

      if(e.touches.length === 1){
        const t = e.touches[0];

        if(scale > 1){
          // ✅ 放大后：pan
          isPanning = true;
          tracking = false;
          panStartX = t.clientX;
          panStartY = t.clientY;
          panStartTx = tx;
          panStartTy = ty;
        }else{
          // ✅ 未放大：swipe / 下滑关闭
          tracking = true;
          isPanning = false;
          startX = t.clientX;
          startY = t.clientY;
          dx = 0; dy = 0;
        }

        isPinching = false;
      }
    }

    function onTouchMove(e){
  if(!lightbox.classList.contains("active")) return;

  // pinch
  if(isPinching && e.touches.length === 2){
    e.preventDefault();
    const dist = getTouchDist(e.touches[0], e.touches[1]);
    const ratio = dist / startDist;
    setScale(startScale * ratio);
    return;
  }

  // pan (scale > 1)
  if(isPanning && e.touches.length === 1){
    e.preventDefault();
    const t = e.touches[0];
    const mx = t.clientX - panStartX;
    const my = t.clientY - panStartY;

    // ✅ 记录本次手势总体位移：用于 touchend 判断是否要切图
    dx = mx;
    dy = my;

    tx = panStartTx + mx;
    ty = panStartTy + my;

    clampPan();
    applyTransform();
    return;
  }

  // swipe (only scale==1)
  if(tracking && e.touches.length === 1){
    e.preventDefault();
    const t = e.touches[0];
    dx = t.clientX - startX;
    dy = t.clientY - startY;
  }
}

    function onTouchEnd(){
  if(!lightbox.classList.contains("active")) return;

  if(isPinching){
    isPinching = false;
    return;
  }

  // ✅ 放大后的手势结束：支持 “到边缘再滑切换”
  if(isPanning){
    isPanning = false;

    const absX = Math.abs(dx);
    const absY = Math.abs(dy);

    // 下滑关闭（放大也支持）
    if(dy > SWIPE_Y && absY > absX){
      closeLB();
      return;
    }

    // 只有“明显水平滑动”才考虑切图
    if(absX > SWIPE_X && absX > absY){
      const { maxX } = clampPan(); // 得到边界
      const edgePad = 2; // 容忍误差

      const atLeftEdge  = (tx <= -maxX + edgePad);
      const atRightEdge = (tx >=  maxX - edgePad);

      // ✅ 在边缘继续往外滑：切换
      if(dx < 0 && atLeftEdge && current < images.length - 1){
        current++;
        render();
        return;
      }
      if(dx > 0 && atRightEdge && current > 0){
        current--;
        render();
        return;
      }
    }

    // 不切图就结束（保持当前 pan 位置）
    return;
  }

  // 未放大：原来的 swipe 逻辑
  if(!tracking) return;
  tracking = false;

  const absX = Math.abs(dx);
  const absY = Math.abs(dy);

  // 下滑关闭
  if(dy > SWIPE_Y && absY > absX){
    closeLB();
    return;
  }

  // 左右切换（scale==1）
  if(scale === 1 && absX > SWIPE_X && absX > absY){
    if(dx < 0 && current < images.length - 1){
      current++; render();
    }else if(dx > 0 && current > 0){
      current--; render();
    }
  }
}

    // 绑定到 stage
    lbStage.addEventListener("touchstart", onTouchStart, {passive:false});
    lbStage.addEventListener("touchmove", onTouchMove, {passive:false});
    lbStage.addEventListener("touchend", onTouchEnd, {passive:true});
    lbStage.addEventListener("touchcancel", onTouchEnd, {passive:true});
    lbStage.addEventListener("click", onTap);

    // 旋转/尺寸变化后：重新计算边界（避免横竖屏切换后拖动出界）
    window.addEventListener("resize", ()=>{
      if(!lightbox.classList.contains("active")) return;
      computeBaseSize();
      clampPan();
      applyTransform();
    });
  </script>
</body>
</html>
